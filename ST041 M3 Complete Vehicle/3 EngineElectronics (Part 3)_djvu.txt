Table of Contents 


Subject Page 


Emissions Management 62 

Evaporative Emissions.62 

Exhaust Emissions.65 

Principle of Operation.70 

Workshop Hints.81 

Tools and Equipment.82 

Performance Controls 84 


Review Questions 


88 











Emissions Management 


Evaporative Emissions: The 

control of the evaporative fuel 
vapors (Hydrocarbons) from the 
fuel tank is important for the over¬ 
all reduction in vehicle emissions. 

The evaporative system has been 
combined with the ventilation of 
the fuel tank, which allows the 
tank to breath (equalization). The 
overall operation provides: 


An inlet vent, to an otherwise 
"sealed" fuel tank, for the entry 13410095.eps 
of air to replace the fuel con¬ 
sumed during engine operation. 


LARGE 
DIAMETER, 
TANK VENT 
LINE 

SMALL LINE ONLY 
USED FOR DETECTING 
LEAKS AT FUEL CAP 
DURING LDP TEST 
(NO HC VAPOR RETURN) 


VAPORS TO EVAPORATIVE 
EMISSION VALVE 

* 


¥ 


LIQUID VAPOR 
SEPARATOR 


DM-TL 


REFUELING 
VAPORS 
STORED IN 
PURGE 
CANISTER 



FILTER 



An outlet vent with a storage canister to "trap and hold" fuel vapors that are produced by 
the expansion/evaporation of fuel in the tank, when the vehicle is stationary. 

The canister is then "purged" using the engine vacuum to draw the fuel vapors into the 
combustion chamber. This "cleans" the canister allowing for additional storage. Like any 
other form of combustible fuel, the introduction of these vapors on a running engine must 
be controlled. The ECM controls the Evaporative Emission Valve which regulates purging of 
evaporative vapors. 

ON-BOARD REFUELING VAPOR RECOVERY (ORVR) 

The ORVR system recovers and stores hydrocarbon fuel vaporthat was previously released 
during refueling. Non ORVR vehicles vent fuel vapors from the tank venting line back to the 
filler neck and in many states reclaimed by a vacuum receiver on the filling station’s fuel 
pump nozzle. 

When refueling, the pressure of the fuel entering the tank forces the hydrocarbon vapors 
through the tank vent line to the liquid/ vapor separator, through the rollover valve and into 
the charcoal canister. 

The HC is stored in the charcoal canister, and the system can then "breath" through the DM 
TL and the air filter. 


62 

MS S54 Emissions Management 


































































Liquid/Vapor Separator: Fuel vapors are routed from 
the fuel tank filler neck through a hose to the 
Liquid/Vapor Separator (located in the right rear wheel 
well behind the trim). 

The vapors cool when exiting the fuel tank, the con¬ 
densates separate and drain back to the fuel tank 
through a return hose (1). The remaining vapors exit the 
Liquid/ Vapor Separator to the Active Carbon Canister. 



Active Carbon Canister: As the fuel vapors enter the 
canister, they will be absorbed by the active carbon. 
The remaining air will be vented to the atmosphere 
through the end of the canister (passing through the 
DMTL and filter) allowing the fuel tank to "breath". 

When the engine is running, the canister is then 
"purged" using intake manifold vacuum to draw fresh 
air through the canister which extracts the hydrocarbon 
vapors into the combustion chamber. This cleans the 
canister for additional storage. The Active Carbon 
Canister is located under the luggage compartment 
floor with the DM TL Pump. 


Evaporative Emission Valve: This ECM controlled 
solenoid valve (located under the intake manifold) reg¬ 
ulates the purge flow from the Active Carbon Canister 
through the idle air distribution pipe into the intake 
manifold . 


Active Carbon Canister 


Evaporative 

Emission 

Valve 



134100147 .eps 


Liquid/Vapor 

Separator 



134100101 .eps 


FROM EVAPORATIVE 
EMISSION CANISTER 


The ECM Relay provides operating voltage, and the 
ECM controls the valve by regulating the ground circuit. 
The valve is powered open and closed by an internal 
spring. 

If the Evaporative Emission Valve circuit is defective, a 
fault code will be set and the "Malfunction Indicator 
Light" will be illuminated. If the valve is "mechanically" 
defective, a driveability complaint could be encoun¬ 
tered and a mixture related fault code will be set. 



134100100.eps 


63 

MS S54 Emissions Management 


















































































































































































































































































































































































































































































































































































































































DMTL (Diagnosis Module - Evaporative Leakage 
Detection): This component ensures accurate fuel 
system leak detection for leaks as small as 1.0 mm 
(.040”) by slightly pressurizing the fuel tank and evapo¬ 
rative components. The DM TL pump contains an inte¬ 
gral DC motor which is activated directly by the ECM. 
The ECM monitors the pump motor operating current 
as the measurement for detecting leaks. 

The pump also contains an ECM controlled change 
over valve that is energized closed during a Leak 
Diagnosis test. The change over valve is open during all 
other periods of operation allowing the fuel system to 
"breath" through the inlet filter. The DM TL is located 
under the luggage compartment floor with the Active 
Carbon Canister. 


1. In its inactive state, filtered fresh air enters the evap¬ 
orative system through the sprung open valve of the 
DM TL. 

2. When the DM E activates the DM TL for leak testing, 
it first activates only the pump motor. This pumps air 
through a restricted orifice (1.0 mm) which causes 
the electric motor to draw a specific amperage 
value. This value is equivalent to the size of the 
restricted. 

3. The solenoid valve is then energized which seals the 
evaporative system and directs the pump output to 
pressurize the evaporative system. 


A large leak is detected in the evaporative system if 
the amperage value is not achieved. 

A small leak is detected if the same reference amper 
age is achieved. 

The system is sealed if the amperage value is higher 
than the reference amperage. 


FRESH 
AIR INLET 


DM-TL 



(Diagnostic Module - 
Tank Leak detection) 


vT 


ECM 

MAIN 

RELAY 


<1 


A A 


13410089.eps 


v 


TL 


IDEID 



FRESH 
AIR INLET 



DM-TL 


(Diagnostic Module - 
Tank Leak detection) 



ECM 

MAIN 

RELAY 


13410088.eps 



FRESH _ 
AIR INLET 


DM-TL 



(Diagnostic Module - 
Tank Leak detection) 

V 


V V 



1 


2 


3 


64 

MS S54 Emissions Management 


13410087 .eps 













































































































































































































































Exhaust Emissions: The com¬ 
bustion process of a gasoline 
powered engine produces Car¬ 
bon Monoxide (CO), Hydrocar¬ 
bons (HC)and Oxides of Nitrogen 
(NOx). 

Carbon Monoxide is a product 
of incomplete combustion un¬ 
der conditions of air deficiency. 
CO emissions are strongly de¬ 
pendent on the air/fuel ratio. 

Hydrocarbons are also a prod¬ 
uct of incomplete combustion 
which results in unburned fuel. 
HC emissions are dependent on 
air/fuel ratio and the ignition of 
the mixture. 



134100103-l.eps 


Oxides of Nitrogen are a product of peak combustion temperature (and temperature 
duration). NOx emissions are dependent on internal cylinder temperatures affected by 
the air/fuel ratio and ignition of the mixture. 


Control of exhaust emissions is accomplished by the engine and engine management 
design as well as after-treatment. 


The EC M manages exhaust emissions by controlling the air/fuel ratio and ignition. 


The Catalytic Converter further reduces exhaust emissions leaving the engine. 


Bosch LSH 25 Oxygen Sensors: The pre-cat 
oxygen sensors (1) measure the residual oxygen 
content of the exhaust gas. The sensors pro¬ 
duces a low voltage (0-1000 mV) proportional to 
the oxygen content that allows the ECM to 
monitor the air/fuel ratio. 

If necessary, the ECM will "correct” the air/fuel 
ratio by regulating the ms injection time. The 
sensor is mounted in the hot exhaust stream 
directly in front of the catalytic converter. 


65 

MS S54 Emissions Management 


























































Ambient Air 



Exhaust 

Stream 


12410005.bmp 


1. Electrode (+) 

7. External Body (Ventilated) 

2. Electrode (-) 

8. Contact Spring 

3. Porous Ceramic Coating (encasing electrolyte) 

9. Vent Opening 

4. Protective Metal Cage (Ventilated) 

10. Output Lead 

5. Casing 

11. Insulator 

6. Contact Sleeve 

12. Exhaust Pipe Wall 


The "tip" of the sensorcontains a microporous platinum coating (electrodes) which conduct 
current. The platinum electrodes are separated by solid electrolyte which conducts oxygen 
ions. 


The platinum conductors are covered with a highly porous ceramic coating and the entire 
tip is encased in a ventilated metal "cage". This assembly is submersed in the exhaust 
stream. The sensor body (external) has a small vent opening in the housing that allows 
ambient air to enter the inside of the tip. 


The ambient air contains a constant level of oxygen content (21%) and the exhaust stream 
has a much loweroxygen content. The oxygen ions (which contain small electrical charges) 
are "purged" through the solid electrolyte by the hot exhaust gas flow. The electrical 
charges (low voltage) are conducted by the platinum electrodes to the sensor signal wire 
that is monitored by the EC 


66 

MS S54 Emissions Management 





































3 


2 


1 


4 

5 


6 

7 


Functional Layout 
of Oxygen Sensor 

1. Solid Electrolyte 

2. Electrode Exhaust Side 

3. Border Zone Exhaust Side. 

4. Partition Wall (Exhaust Pipe) 

5. Electrode, Air Side 

6. Border Zone, Air Side 

7.Oxygen Ion With Double 
Negative. 

18410000.eps 


If the exhaust has a lower oxygen content (rich mixture), there will be a large ion "migration” 
through the sensor generating a higher voltage (950 mV). 


If the exhaust has a higher oxygen content (lean mixture), there will be a small ion "migra¬ 
tion" through the sensor generating a lower voltage (080 mV). 


This voltage signal is constantly changing due to 
combustion variations and normal exhaust pul¬ 
sations. 


The ECM monitors the length of time the sen¬ 
sors are operating in the lean, rich and rest con¬ 
ditions. The evaluation period of the sensors is 
over a predefined number of oscillation cycles. 



Fru Cal. “■? Sunai&i E&kp-:rwk. 

i HU 


13410092 .eps 


■» 


This conductivity is efficient when the oxygen 
sensor is hot (250 s - 300 s C). For this reason, 
the sensor contains a heating element. This 
"heated" sensor reduces warm up time, and 
retains the heat during low engine speed when 
the exhaust temperature is cooler. 



67 

MS S54 Emissions Management 











































































































Catalytic Converter Monitoring: The efficiency of catalyst operation is determined by 
evaluating the oxygen storage capability of the catalytic converters using the pre and post 
oxygen sensor signals. 


A properly operating catalyst consumes or stores most of the 02 (oxygen) that is present 
in the exhaust gas (input to catalyst). The gases that flow into the catalyst are converted 
from CO, HC and NOx to C02, H20 and N2 respectively. 


In order to determine if the catalysts are working 
correctly, post catalyst oxygen sensors (2) are 
installed to monitor exhaust gas content exiting 
the catalysts. 

The signal of the post cat. 02 sensor is evaluat¬ 
ed overthe course of several pre cat. 02 sensor 
oscillations. During the evaluation period, the 
signal of the post cat. sensor must remain with¬ 
in a relatively constant voltage range (700 - 800 
mV). 



The post cat. 02 voltage remains high with a 
very slight fluctuation. This indicates a further 
lack of oxygen when compared to the pre cat. 
sensor. If this signal decreased in voltage and/or 
increased in fluctuation, a fault code will be set 
for Catalyst Efficiency and the "Malfunction 
Indicator Light" will illuminate. 



134100104.eps 


Secondary Air Injection: In order to reduce 
HC and CO emissions during engine warm up, 
an electric Air Pump (2) and Air Injection Valve (1) 
direct fresh airthrough an internal channel in the 
cylinder head into the exhaust ports. The Air 
Injection Valve is opened by air pressure and 
closed by an internal spring. 

Secondary Air injection also provides: 

Reduction in catalyst warm-up time 



Accelerated hydrocarbon Oxidation 


134100104-tiff 


68 

MS S54 Emissions Management 












Misfire Detection: As part of the OBD II regulations the ECM must determine misfire and 
also identify the specific cylinders), the severity of the misfire and whether it is emissions 
relevant or catalyst damaging based on monitoring crankshaft acceleration. 

In orderto accomplish these tasks the ECM monitors the crankshaft for acceleration by the 
impulse wheel segments of cylinder specific firing order. The misfire/engine roughness cal¬ 
culation is derived from the differences in the period duration of individual increment gear 
segments. 

Each segment period consist of 
an angular range of 90° crank 
angle that starts 54° before Top 
Dead Center. 

If the expected period duration 
is greater than the permissible 
value a misfire fault forthe partic¬ 
ular cylinder is stored in the fault 
memory of the ECM . 


Depending on the level of misfire 
rate measured the ECM will illu¬ 
minate the "M alfunction Indicator 
Light”, deactivate the specific 
fuel injector to the particular 
cylinder and switch lambda 
operation to open-loop. 


In order to eliminate misfire faults that can occur as a result of varying flywheel tolerances 
(manufacturing process) an internal adaptation of the flywheel is made. The adaptation is 
made during periods of decel fuel cut-off in orderto avoid any rotational irregularities which 
the engine can cause during combustion. This adaptation is used to correct segment dura¬ 
tion periods prior to evaluation fora misfire event. 

If the sensorwheel adaptation has not been completed the misfire thresholds are limited to 
engine speed dependent values only and misfire detection is less sensitive. The crankshaft 
sensor adaptation is stored internally and is not displayed via DISplus or MoDIC. If the 
adaptation limit is exceeded a fault will be set. 


CRANKSHAFT 
POSITION 
SENSOR 
(HALL EFFECT) 



| Print 

| Change 

l End 1 

| Services 


BMW Test system Oscilloscope display 
V a 



| Hold Screen 


a 


I Module |1 ||< >| 


1 


\S> 


| Change |" |End |" | Services |" 


BMW Test system Oscilloscope display 
v 



| Hold Screen |" 


l> 


SMOOTH RUNNING ENGINE 
(NOTE SQUARE WAVE SIGNAL) 


ENGINE MISFIRE DETECTED 


134100101 .eps 


69 

MS S54 Emissions Management 


























































































































































































































































































Principle of Operation 

Emissions Management controls evaporative and exhaust emissions. The ECM monitors 
the fuel storage system for evaporative leakage and controls the purging of evaporative 
fuel. The EC M monitors and controls the exhaust emissions by regulating the combustible 
mixture and after treating by injecting fresh air into the exhaust system. The catalytic con¬ 
verter further breaks down remaining combustible exhaust gases and is monitored by the 
ECM for catalyst efficiency 



The Evaporative Leakage Detection is performed on the fuel storage system by the DM 


TL pump which contains an integral DC motorthat is activated by the ECM . The ECM mon¬ 
itors the pump motor operating current as the measurement for detecting leaks. 


The pump also contains an ECM controlled change over valve that is energized closed dur¬ 
ing a Leak Diagnosis test. The ECM only initiates a leak diagnosis test even/ second time 
the criteria are met. The criteria is as follows: 


Engine OFF with ignition switched OFF. 


ECM still in active state or what is known as "follow up mode” (ECM Relay energized, 
ECM and components online for extended period after key off). 


Prior to Engine/Ignition switch OFF condition, vehicle must have been driven for a min¬ 
imum of 20 minutes. 

Prior to minimum 20 minute drive, the vehicle must have been OFF for a minimum of 5 
hours. 


70 

MS S54 Emissions Management 








































































Fuel Tank Capacity must be between 15 and 85% (safe approximation between 1/4 - 
3/4 of a tank). 

Ambient Air Temperature between -7°C & 35°C (20°F & 95°F ) 

Altitude < 2500m (8,202 feet). 

Batten/ Voltage between 11.5 and 14.5 Volts 

When these criteria are satisfied every second time, the ECM will start the Fuel System 
Leak Diagnosis Test. The test will typically be carried out once a day ie:, once after driving 
to work in the morning, when driving home in the evening, the criteria are once again met 
but the test is not initiated. The following morning, the test will run again. 


PHASE 1- REFERENCE MEASUREMENT 

The ECM activates the pump motor. The pump pulls air from the filtered air inlet and pass¬ 
es it through a precise 1.0 mm reference orifice in the pump assembly. 

The ECM simultaneously monitors the pump motor current flow. The motor current raises 
quickly and levels off (stabilizes) due to the orifice restriction. The ECM stores the stabilized 
amperage value in memory The stored amperage value is the electrical equivalent of a 1.0 
mm (0.040") leak. 


PHASE 2 - LEAK DETECTION 

The ECM energizes the Change Over Valve allowing the pressurized air to enter the fuel 
system through the Charcoal Canister. The ECM monitors the current flow and compares 
it with the stored reference measurement over a duration of time. 

Once the test is concluded, the ECM stops the pump motorand immediately de-energizes 
the change over valve. This allows the stored pressure to vent thorough the charcoal can¬ 
ister trapping hydrocarbon vapor and venting air to atmosphere through the filter. 


71 

MS S54 Emissions Management 



TEST RESULTS 


The time duration varies between 45 & 270 seconds depending on the resulting leak diag¬ 
nosis test results (developed tank pressure "amperage” / within a specific time period). 
However the chart below depicts the logic used to determine fuel system leaks. 

Current 



If the ECM detects a leak, a fault will be stored and the "Malfunction Indicator Light" will be 
illuminated. Depending on the amperage measurement detected by the ECM, the fault 
code displayed will be "small leak" or "large leak". 


If the vehicle was refueled and the filler cap was not properly 
installed, the "Check Filler Cap” message will be displayed. 

The ECM detects refueling from a change in the fuel tank 
sending unit level via the Instrument Cluster. Upon a restart 
and driving the vehicle, the leakage test will be performed. If 
the ECM detects leakage, the "Check Filler Cap" light will 
illuminate in the lower left corner of the instrument cluster. 

If the filler cap is installed and there is no leakage present the 
next time the leakage test is performed, the "Malfunction 
Indicator Light" will not be illuminated. 



62410002. 


Check 

Filler 

Cap 


72 

MS S54 Emissions Management 



















Evaporative Emission Purging is regulated by the ECM controlling the Evaporative 
Emission Valve. The Evaporative Emission Valve is a solenoid that regulates purge flow from 
the Active Carbon Canister into the intake manifold. The ECM Relay provides operating 
voltage, and the ECM controls the valve by regulating the ground circuit. The valve is pow¬ 
ered open and closed by an internal spring. 


FROM EVAPORATIVE 
EMISSION CANISTER 


The "purging" process takes place when: 
Oxygen Sensor Control is active 
Engine Coolant Temperature is >60 2 C 
Engine Load is present 






134100100. 



The Evaporative Emission Valve is opened in stages to moderate the purging. 


Stage 1 opens the valve for 10 ms (milli-seconds) and then closes for 150 ms. 


The stages continue with increasing opening times (up to 16 stages) until the valve is 
completely open. 


The valve now starts to close in 16 stages in reverse order 


This staged process takes 6 minutes to complete. The function is inactive for 1 minute 
then starts the process all over again. 


During the purging process the valve is completely opened during full throttle operation 
and is completely closed during deceleration fuel cutoff. 


Evaporative Purge System Flow Check is performed by the ECM when the oxygen 
sensorcontrol and purging is active. When the Evaporative Emission Valve is open the ECM 
detects a rich/lean shift as monitored by the oxygen sensors indicating the valve is func¬ 
tioning properly. 

If the ECM does not detect a rich/lean shift, a second step is performed when the vehicle 
is stationary and the engine is at idle speed. The ECM opens and close the valve (abrupt¬ 
ly) several times and monitors the engine rpm for changes. If there are no changes, a fault 
code will be set. 


73 

MS S54 Emissions Management 

































































Fuel System Monitoring is an 

OBD II requirement which moni¬ 
tors the calculated injection time 
(ti) in relation to engine speed, 
load, and the pre catalytic con¬ 
verter oxygen sensor(s) signals as 
a result of the residual oxygen in 
the exhaust stream. 

The ECM uses the pre catalyst 
oxygen sensor signals as a cor¬ 
rection factor for adjusting and 
optimizing the mixture pilot con¬ 
trol under all engine operating 
conditions. 




] 


TV 


WHERE MULTIPLICATIVE ADAPTATION OCCURS 


WHERE 

ADDITIVE 

ADAPTATION 

OCCURS 





O 




INTAKE AIR c 
MASS „ 





\ / 


► 



CRANKSHAFT 

POSITION 

SENSOR 



OXYGEN 

SENSOR 

SIGNAL(S) 



ADAPTATION 
OXYGEN INFLUENCE 
SENSOR 
INFLUENCE 

^—► = INJECTION TIME 





T 


c 





f 


K 



DAPTATION OF 
INJECTION 
IME DURATION 


134100100.eps 


Adaptation Values are stored by the ECM In order to maintain an "ideal" air/fuel ratio. 

The ECM is capable of adapting to various environmental conditions encountered while the 
vehicle is in operation (changes in altitude, humidity, ambient temperature, fuel quality, etc.). 


The adaptation can only make slight corrections and can not compensate for large 
changes which may be encountered as a result of incorrect airflow or incorrect fuel supply 
to the engine. 


Within the areas of adjustable adaption, the ECM modifies the injection rate under two 
areas of engine operation: 


During idle and low load mid range engine speeds (Additive Adaptation), 


During operation under a normal to higher load when at higher engine speeds 

(Multiplicative Adaptation). 


These values indicate how the ECM is compensating fora less than ideal initial air/fuel ratio. 


NOTE: If the adaptation value is greater than "0.0 ms" the ECM is trying to richen the mix¬ 
ture. If the adaptation value is less then "0.0 ms the ECM is trying to lean-out the mixture. 


74 

MS S54 Emissions Management 






























































Catalyst Monitoring is performed by the ECM under oxygen sensor closed loop opera¬ 
tion. The changing air/fuel ratio in the exhaust gas results in lambda oscillations at the pre¬ 
catalyst sensors. These oscillations are dampened by the oxygen storage activity of the 
catalysts and are reflected at the post catalyst sensors as a fairly stable signal (indicating 
oxygen has been consumed). Conditions for Catalyst Monitoring: 

Requirements Status/Condition 


Closed loop operation 
Engine coolant temperature 
Vehicle road speed 
Catalyst temperature (calculated)* 
Throttle angle deviation 
Engine speed deviation 
Average lambda value deviation 


YES 

Operating Temp. 

3 - 50 MPH (5 to 80 km/h) 
350°C to 650°C 
Steady throttle 
Steady/stable engine speed 
Steady/stable load 


* Catalyst temperature is an internally calculated value that is a function of load/air mass 
and time. 


Note: The catalyst efficiency is monitored once per trip while the vehicle is in closed loop 
operation. 


As part of the monitoring process, the pre and 
post 02 sensor signals are evaluated by the 
ECM to determine the length of time each sen¬ 
sor is operating in the rich and lean range. 


If the catalyst is defective the post 02 sensor 
signal will reflect the pre 02 sensor signal 
(minus a phase shift/time delay), since the cat¬ 
alyst is no longer able to store oxygen. 



134100104.eps 


The catalyst monitoring process is stopped once the predetermined number of cycles are 
completed, until the engine is shut-off and started again. After completing the next "cus¬ 
tomer driving cycle" whereby the specific conditions are met and a fault is again set, the 
"Malfunction Indicator Light” will be illuminated. 


75 

MS S54 Emissions Management 











Oxygen Sensor Heating is con¬ 
trolled by the ECM to reduces 
warm up time and retain heat 
during low engine speed when 
the exhaust temperature is cool¬ 
er. 

Voltage is supplied from the ECM 
Relay and the ground circuit is 
provided by the ECM in pulse 
width modulation. By pulsing the 
ground circuit, the oxygen sensor 
heaters are gradually brought up 
to temperature. Each oxygen 
sensor has an individual circuit 
provided by the ECM . 



During full throttle operation elec¬ 
trical heating is not required and 
is deactivated by the ECM. 


Oxygen Sensor Heater Monitoring is part of the OBD II requirements requiring all oxy¬ 
gen sensors to be monitored separately for electrical integrity and heater operation. The 
heater function is monitored continuously while the vehicle is in closed loop operation, dur¬ 
ing activation by the ECM . An improperly/non operating heaterwill notallow the sensorsig- 
nal to reach its predefined maximum and minimum thresholds which can: 

Result in delayed closed loop operation causing an impact on emission levels. 

Result in increased emission levels while in closed loop operation. 

As part of the monitoring function for heatercurrent and voltage, the circuit is also checked 
foran open, short to ground and short to B + depending on the values of the current orvolt- 
age being monitored. 

The EC M measures both sensor heater current and the heater voltage in order to calculate 
the sensor heater resistance and power. If the power of the heater is not within a specified 
range, a fault will be set. The next time the heater circuit is monitored and a fault is again 
present the "M alfunction Indicator Light” will be illuminated. 


76 

MS S54 Emissions Management 






























Secondary Air Injection is 

required to reduce HC and CO 
emissions while the engine is 
warming up. Immediately follow¬ 
ing a cold engine start (-10 to 
40°C) fresh air/oxygen is injected 
directly into the exhaust stream. 

The temperature signal is provid¬ 
ed to the ECM by the Air 
Temperature Sensor in the HFM . 

The ECM provides a ground cir¬ 
cuit to activate the Secondary Air 
Injection Pump Relay. The relay 
supplies voltage to the Secon¬ 
dary Air Injection Pump. 

The single speed pump runs for 
approximately 90 seconds after 
engine start up. 




12410008.bmp 


* Below -10 s C the pump is activated briefly to "blow out" any accumulated moisture. 


Secondary Air Injection Monitoring is per¬ 
formed by the ECM via the use of the pre-cat¬ 
alyst oxygen sensors. Once the air pump is 
active and is air injected into the exhaust sys¬ 
tem the oxygen sensor signals will indict a lean 
condition. 

If the oxygen sensor signals do not change 
within a predefined time a fault will be set and 
identify the faulty bank(s). After completing the 
next cold start and a fault is again present the 
"Malfunction Indicator Light" will be illuminated. 



SECONDARY AIR 
INJECTION 
SYSTEM 


134100103-1 .eps 


77 

MS S54 Emissions Management 

























































Misfire Detection is part of the OBD II regulations the ECM must determine misfire and 
also identify the specific cylinder(s), the severity of the misfire and whether it is emissions 
relevant or catalyst damaging based on monitoring crankshaft acceleration. 


Emission Increase: 

Within an interval of 1000 crankshaft revolutions, the ECM adds the the detected misfire 
events for each cylinder. If the sum of all cylinder misfire incidents exceeds the predeter 
mined value, a fault code will be stored. 

If more than one cylinder is misfiring, all misfiring cylinders will be specified and the indi 
vidual fault codes for all misfiring cylinders and for multiple cylinder will be stored. 


Catalyst Damage: 

Within an interval of 200 crankshaft revolutions the detected number of misfiring events 
is calculated for each cylinder. The ECM monitors this based on load/rpm. If the sum of 
cylinder misfire incidents exceeds a predetermined value, a fault code is stored and the 
"Malfunction Indicator Light" will be illuminated. 


If the cylinder misfire count exceeds the predetermined threshold the ECM will take the 
following measures: 


The oxygen sensor control w 
be switched to open loop. 


The cylinder selective fault code 
is stored. 

If more than one cylinder is mis 
firing the fault code for all indi 
vidual cylinders and for multiple 
cylinders will be stored. 

The fuel injector to the respec 
tive cylinder(s) is deactivated. 


78 


A 


I 


A 



§ | 

I 


A 


I 


A 


I 


CRANKSHAFT 

POSITION 

SENSOR 




& 


3 



& 


3 



& 


3 



& 


3 



INJ 

#3 


INJ 

#4 


INJ 

#5 


INJ 

#6 


S S54 Emissions Management 































































The Integrated Ambient Barometric Pressure Sensor of the MS S54 is part of the 
ECM and is not serviceable. The internal sensor is supplied with 5 volts. In return it provides 
a linear voltage of approx. 2.4 to 4.5 volts representative of barometric pressure (altitude). 

The MS S54 monitors barometric pressure for the following reasons: 

The barometric pressure signal along with calculated air mass provides an additional cor¬ 
rection factor to further refine injection "on" time. 

P rovides a base value to calculate the air mass being injected into the exhaust system by 
the Secondary Air Injection System. This correction factor alters the secondary air injec¬ 
tion "on" time, optimizing the necessary airflow into the exhaust system. 



\© 


INTEGRAL 

BAROMETRIC 

PRESSURE 

SENSOR 


PROVIDES ADDITIONAL CORRECTION 
FACTOR FOR FOLLOWING FUNCTIONS 






12 3 





SECONDARY 
AIR PUMP 
RELAY 






O SENSOR 
HEATING 


L!zz£ D 


% //! 



LEAK DIAGNOSISTEST 
POSTPONEMENT 


n 


o 


M 3 =^ 


134100105.eps 




79 

MS S54 Emissions Management 






















































































E46 M3 Diagnostic Socket: For model year 
2001 the E46 will eliminate the 20 pin diagnos¬ 
tic connector from the engine compartment. 
The 16 pin OBD II connector located inside the 
vehicle will be the only diagnosis port. The 16 
pin OBD II connector has been in all BMWs 
since 1996 to comply with OBD regulations 
requiring a standardized diagnostic port. 

Previously before 2001, only emissions relevant 
data could be extracted from the OBD conn¬ 
ector because it did not provide access to TXD 
(D-bus). The TXD line is connected to pin 8 of 
the OBD II connectoron vehicles without the 20 
pin diagnostic connector. 



The cap to the OBD II connector contains a 
bridge that bridges KL 30 to TXD and TXD II. 
This is to protect the diagnostic circuit integrity 
and prevent erroneous faults from being logged. 

The OBD II connector is located in the dri¬ 
vers footwell to the left of the steering col¬ 
umn. 

Special tool 61 4 300 is used to connect to the 
20 pin diagnostic lead of the DIS until the intro¬ 
duction of the DISplus. 




124100108.eps 

80 

MS S54 Emissions Management 















































































Workshop Hints 

Before any service work is performed on any fuel sys¬ 
tem related component, always adhere to the following: 

Observe relevant safety legislation pertaining to your area. 

Ensure adequate ventilation 

Use exhaust extraction system where applicable (alleviate 04410002 

fumes). 

DO NOT SMOKE while performing fuel system repairs. 

Always wear adequate protective clothing including eye protection. 

Use caution when working around a HOT engine compartment. 

BMW does not recommend any UNAUTHORIZED MODIFICATIONS to the fuel sys¬ 
tem. The fuel systems are designed to comply with strict federal safety and emissions 
regulations. In the concern of product liability, it is unauthorized to sell or perform modi¬ 
fications to customer vehicles, particularly in safety related areas. 

Always consult the REPAIR INSTRUCTIONS on the specific model you are working 
on before attempting a repair. 


Checking Fuel Tank and Ventilation System for Leak-Tightness 

Refer to the Repair Information Section 16 00 100 for procedures on testing the fuel 
tank/ventilation system. 

Refer to Service Information Bulletins SI # 04 06 97 and # 04 01 98 for the special tools 
and adapters to perform the Evaporative Leakage Diagnosis Test. 



81 

MS S54 Emissions Management 


Tools and Equipment 


3 


The DIS plus/M odic as well as a reputable hand 
held multimeter can be used when testing 
inputs/components. 

It is best to make the checks at the ECM con¬ 
nection, this method includes testing the wiring 
harness. 




07410001 .eps 


The correct Universal Adapter for the MS S54 
application should be used (#90 88 6 121 300). 
This will ensure the pin connectors and the har¬ 
ness will not be damaged. 


When installing the Universal Adapter to the 
ECM (located in the Electronics Box in the 
engine compartment), make sure the ignition is 
switched off. 


SKE BREAKOUT BOX SET 
P/N 90 88 6 121 300 


ENGINE CONTROL 
MODULE HARNESS 





©©©©© 

©©©©© 

©©©©© 

©©©©© 

©©©©© 

© 


26 
PIN 
BOX 
88 88 6 611 459 

13410063 .eps 



nn 

s 

V 

e 

z 

V 


134 PIN 
SKE 






©s®©© 

®©©Q© 

©©©©© 

©©©©© 

©©©©© 

© 


26 
PIN 
BOX 
88 88 6 611 459 



When checking the fuel tank and ventilation 
system for leak-tightness use Special Tool Set 
#90 88 6 161 150 which includes all of the 
pieces shown to the right. 

This set is used in conjunction with shop sup¬ 
plied compressed air and the DISplus 
Multimeter function for reading the pressure 
bleed off. 



82 

MS S54 Emissions Management 


04410006.bmp 









































































































This Special Tool Set #90 88 6 161 160 will 
also be required to "cap off” the DM TL air filter 
and Evaporative Emission Valve hose when 
performing the Leakage Diagnosis Test. 



04400005.tiff 


If the test indicates excessive bleed off a leak 
detector should be used (refer to Repair 
Instructions) to check for leaks at: 

Fuel Filler Cap and Filler Neck 

Fuel Tank Ventilation Lines 

Evaporative Emission Valve 

Fuel Tank and Fuel Sending Unit 

Liquid/Vapor Separator 



83 

MS S54 Emissions Management 





Performance Controls 


12410018.eps 



Sport Switch: The MS S54 ECM contains two different throttle 
progression program curves (Sport and Normal). The sport pro¬ 
gram is selected by pressing the Sport switch located in the cen¬ 
ter console switch panel. 

The switch provides a ground signal (input) to the ECM when 
pressed. The MS S54 activates the sport characteristics for the 
EDR throttle control. This provides an increase in throttle opening 
and response time over the non-sport position. 


SPORT 


12410019.eps 


Power Transmission Switch: The power transmission switch (circuit) consists of two 
switches in series. The circuit includes a clutch switch and a gear selector switch on the 
transmission. The functions of the power transmission switch are as follows: 

Cutout for cruise control operation 
Enable condition for idle control 


The switches provide a high signal for the M 5 554 when the clutch is disengaged and the 
transmission is in gear. If either the clutch is engaged or the transmission is in neutral, the 
cruise control will be disengaged. 



12410051.eps 



MS S54 Performance Controls 





























































































































Cruise Control: As with other electronic throt¬ 
tle systems, the MS S54 ECM takes over the 
function of cruise control. Throttle activation is 
provided by the MS S54 electronic control of 
the EDR Actuator and monitoring of the feed¬ 
back potentiometers. 

All driver requested cruise control function 
requests are provided to the MS S54 from the 
MFL II control module in the steering wheel 
over a single FGR data lead. 



31410001 jpg 


Oil Temperature/Level Sensor: The electronic level sensor is located in the engine sump 
mounted to the engine oil pan. The probe of the level sensor contains two temperature 
sensing elements. 


One senses the engine oil temperature. 

The other is heated to 10 s C above the temperature 
of the engine and then is allowed to cool. 

The length of time it takes to cool the heated element 
is how the sensor determines the engine oil level. 
When the oil level is high it covers a larger portion of 
the probe submersed in the oil sump. The engine oil 
around the probe absorbs the heat of the heated ele¬ 
ment quicker than if the level is low. 

The microprocessor in the base of the sensor pro¬ 
duces a pulse width modulated signal proportional to 
the oil level. The pulse width increases with a 
decreased level of oil. 


MONITORS ENGINE 
OIL TEMPERATURE 
FOR CALCULATION 


HEATED TO 10 C 
ABOVE OIL TEMP AND 
TIMED AS IT COOLS 




Based on the oil temperature, the visual warning LEDs in the tachometer will illuminate at 
cold engine start up and slowly be extinguished as the oil temperature increases. One 
amber and the red LEDs always stay illuminated reminding the driver of maximum rpm 
zone. 


The oil temp sensor also serves as a vital input for VANOS operation, varying the solenoid 
control based on oil temperature (reaction time of camshaft movement). In the event of a 
fault the engine coolant temperature is used as a substitute value. 



MS S54 Performance Controls 






















Electric Cooling Fan: The electric cooling fan is controlled by the EC M . The EC M uses a 
remote power output final stage (mounted on the fan housing). The power output stage 
receives power from a 50 amp fuse. The electric fan is controlled by a pulse width modu¬ 
lated signal from the ECM . 

The fan is activated based on the ECM calculation of: 


Coolant outlet temperature (monitored by the Radiator Outlet Temperature Sensor) 
Calculated (by the ECM) catalyst temperature 
Vehicle speed 
Battery voltage 

Air Conditioning refrigerant pressure (calculated by IHKA and sent via the K-Bus to the 
ECM) 



12410009.bmp[ 



MS S54 Performance Controls 




































Workshop Hints 

IMPORTANT! 


From December2001production, M3 and M roadster/coupi vehicles with S54 engines are 
delivered to die centers with die engine speed electronically limited to 5500 rpm as a trans¬ 
portation protection feature. 

During the pre-delivery inspection the engine speed limiterfunction has to be disabled using 
DISplus or M oDIC loaded with CD28.0 or higher Refer to SI 12 01 02 for additional details. 

Procedure 


Perform a "short test" on the ECM (DM E) only 
Select "Control Units Functions" path 
Select "Digital Motor Electronics DME" 

Select "Acknowledge Handover Inspection" 
Select "Activate" 

The display will show "off: terminate" 


Tools and Equipment 

The DISplus/M oDIC as well as a reputable hand 
held multimeter can be used when testing 
inputs/components. 





07410000.eps 


It is best to make the checks at the ECM con¬ 
nection, this method includes testing the wiring 
harness. 

The correct Universal Adapter for the MS S54 
application should be used (#90 88 6 121 300). 
This will ensure the pin connectors and the har¬ 
ness will not be damaged. 

When installing the Universal Adapter to the 
ECM (located in the Electronics Box in the 
engine compartment), make sure die ignition is 
switched off. 


SKE BREAKOUT BOX SET 
P/N 90 88 6 121 300 


ENGINE CONTROL 
MODULE HARNESS 



©©©©© 

©©©©© 

©©©©a 

©©©©© 

©©©©© 

© 


26 
PIN 
BOX 
88 88 6 611 459 


©©©©© 

©s©©© 

©©©©© 

©©©©© 

©©©©© 

© 


26 
PIN 
BOX 
88 88 6 611 459 

13410063 .eps 




MS S54 Performance Controls 






























































































Review Questions 


1. Describe the Power Supply for the Fuel Injectors and Ignition Coils: 


2. Name the Components of the Fuel Supply System: 


3. List the inputs required fpr Fuel Injector operation: 


4. Describe the Emission Optimized Function: 


5. Name two types of Emissions the ECM controls:_ 

6. What two sensors are used to monitor throttle movement 7 

7. Why are there two inputs from the Accelerator M odule?_ 


8. Where is the Diagnostic Socket located 7 _ 

9. How many speeds will the Secondary Air Injection Pump run at 7 _ 

10. What is the Repair Instruction (number) for the procedure to perform a Leakage 

Diagnosis Test 7 _ 

11. How is the secondary ignition monitored for misfire 7 _ 



MS S54 Performance Controls 




















