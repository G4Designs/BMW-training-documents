Table of Contents 


Subject Page 

M54 Engine 

Introduction.2 

Mechanical changes.4 

Performance Charts .6 

Review Questions.7 

Siermen’s MS 43.0 System 

• Introduction.8 

• l-P-0 .9 

MS 43.0 New functions 

• Electronic throttle Control .10 

• Accelerator Pedal Sensor (PWG) .11 

• Electronic Throttle Valve (EDK) .13 

• Main Relay Monitor.15 

• Engine Optimized Ignition Key OFF.16 

• Diagnosis Module Tank Leakage (DM-TL) .17 

• DM-TL Function.18 

• DM-TL Test Procedure.20 

Carry Over Functions 
Inputs 

• Oxygen Sensor.25 

• Camshaft Sensors.26 

• Crankshaft Sensor.27 

• Misfire Detection.28 

• OBD Fault Codes .30 

• Mass Air Meter.31 

Outputs 

• VANOS Control.33 

• Electric Fan.36 

• Secondary Air Injection .37 

• Engine Speed Limit.39 

• RZV Ignition .40 

• Resonance - Turbulence Manifold .42 

• Idle Speed control.45 

• Cruise Control.46 

• Purge Control.47 


Initial Print Date: 02/2000 Revision Date: 6/2000 

































M54 ENGINE 

Models: E53 X5 r 
SOP: 3 liter-4/00 

Objectives of the Module: 


At the end of this section of the handout, you will be able to: 

• Identify the changes to the M54 engines over the M52 TU engine. 

• List the design objectives for the M54 engine. 


Purpose of the System: 

The M54 engine was developed to meet the needs for ULEV compliancy for emission con¬ 
trol. The increase in displacement allows the engine to fit the X5 All Roads vehicle while still 
meeting the demands for power and performance. 

INTRODUCTION 

The M54 - 6 cylinder engine is being introduced with the 2001 Model Year E53 - X5. The 
displacement of the new engine for the X5 is 3 liters and the engine will replace the 2.8 liter 
engine in the E46/Z3 series in 6/2000 and E39 series vehicles in 9/2000. 


Design objectives for the M54 engine were to provide: 

• Lower Emissions 

• Maintain Fuel Economy 

• Maintain Power and Performance levels 


2 

M54engMS43/ST036/6/2000 




M54 ENGINE 



M54B30 

HORSE POWER 225@5900RPM 

TORQUE 300N m@3500R P M 


ART-A0021216 


BORE 84mm 

STROKE 89.6mm 

COMPRESSION 10.2:1 


3 

M54engMS43/ST036/6/20000 





M54 ENGINE 


Mechanical Changes 

In addition to the increased displacement of the M54B30 engine, several mechanical 
changes were incorporated into the engine for reduced emissions and increased fuel econ¬ 
omy. These changes include: 


• NEW PISTONS - The piston has a shorter skirt compared to the M52 TU and continues 
with the graphite coating for friction and emission reducing measures. The piston rings have 
been modified to reduce friction. 

• CRANKSHAFT - The crankshaft for the 3 liter M54 is adopted from the S52B32 - M3 
engine. 

• CAMSHAFT - The camshaft for the 3 liter M54 is modified with more lift (9.7 mm) and 
new valve springs to accommodate the increased lift. 

• INTAKE MANIFOLD - The intake manifold is modified with shorter ram tubes (20mm 
shorter on 3 liter. The diameter of the tubes is increased slightly. 

• INJECTION VALVES - The diameter of the injection pintle has increased slightly for the 
increased displacement of the 3 liter engine. 



4 

M54engMS43/ST036/6/2000 








M54 ENGINE 


MECHANICAL CHANGES 

NON RETURN FUEL RAIL SYSTEM 

The M54 engine with MS 43.0 control uses the non return fuel rail system introduced on 
the M62 TU engine. The system meets running loss compliance without the use of the 3/2- 
way solenoid valve currently used on the M52 TU engine. 



The regulated fuel supply is controlled by 
the fuel pressure regulator integrated in 
the fuel filter. The fuel return line is also 
located on the filter. 


The M54 engine uses an Electronic Controlled 
Throttle Valve (EDK) for intake air control. The 
idle control valve and turbulence function of the 
intake manifold carries over from the M52 TU 
engine. 




5 

M54engMS43/ST036/6/20000 


















REVIEW QUESTIONS 

1. What is the major reason for the development of the M54 engine? 


2. What are the major mechanical changes that were integrated into the3 liter M54 engine? 


7 

M54engMS43/ST036/6/20000 




SIEMENS ENGINE MANAGEMENT SYSTEM 

Models: E53 X5 
SOP: 3 liter-4/00 
Objectives of the Module: 

At the end of this section of the handout you will be able to: 

• Identify the changes that have occurred to the MS 43 system compared to the MS 42 

• Describe the operation of the new inputs 

• Describe the operation of the new outputs 

• Discuss which new components/subsystems relate directly to ULEV compliancy 

This new generation Siemens system is designated as MS 43.0. 

Siemens MS 43.0 is a newly developed engine management system to meet the needs of 
Ultra Low Emission Vehicle (ULEV) compliancy and continuing with present systems is also 
OBD II compliant. This system also includes control of the Motor-driven Throttle Valve 
(EDK). 

The ECM uses a pc-board dual-processor control unit in the SKE housing configuration. 
The MS 43.0 ECM is flash programmable as seen with previous systems. 

ECM hardware includes: 

Modular plug connectors featuring 5 connectors 

• Connector 1 = Supply voltages and grounds 

• Connector 2 = Peripheral signals (oxygen 
sensors, CAN, etc.) 

• Connector 3 = Engine signals 

• Connector 4 = Vehicle signals 

• Connector 5 = Ignition signals 

Special features: 

• Flash EPROM which is adaptable to several M52 LEV engines and has the capability to 
be programmed up to 13 times 

• Once a control unit is installed and coded to a vehicle it cannot be swapped with anoth¬ 
er vehicle for diagnosing or replacement (because of EWS 3.3). 

8 

M54engMS43/ST036/6/2000 


in the SKE housing with 134 pins. 











SYSTEM OVERVIEW l-P-0 



*V1S 


MEMOH1T ?>OVpL:H 


AUX1CL31 


ECM 

'■ ftLLAV 


MAJh KL 1 1 


OPBU1 iy& POwEft 



& MONITOR 
RADIATOR OUTLE" 

TEM^tolUPtESWSOR 


CRANKSHAFT 

position 



rfMOCK 

SE^SO^S 


cj^skaft j'osnicyj 

HI 


TH 


MFL flUTTTiyj PAD 


AiFLMAEFi SIQNAi. 




MTrfWf 

AjR 

TEMP 


throttle 

Ptrentfr* 


l£UJUCd-FrtTTCa_ 
&ftAK£ Ug>IT WT^CH 
MAKEU&HT TESTS-WITCH- 


fcMUNL PCMPE^Tunf 


OIL TEMP 
EtNSOR 


iC.'JTH^ M DVT OR 




JtfL 



VIH»CLE SPEED INPUT 


QSc 


If] 


1 ROLliNG CODE 

DMTL 





SIEMENS 

MS43.0 

M54 

136 PINS 


ECM PLLAT 
CONTROL 


I 


HJEL flCOV CONTROL 


M 


4 

■ * 


.AC COMPRESSOR 

RELATCOfflML 


*■ 

4, 


Secondary air injection 

JUR RCLAV CONTRO. 

RtfiONA-NCE -TURBULENCE 
iNTAKF SV^TEM 

mlUJ l ™s 

Ml 


ITT 


1 


@h 


I^AKr VANQS.SOiRwJlO 


£ 


C miaijSI vAn0$ SGU'mQiCi 


1-4- 


SEQUfUTUe. FUEL i NjECTQfl CQKTnQL (PJ 
iGNfl ffltt COiLS CCfJTPH X iftjfl 

C& SE.NSCH HEATING 


t 


* 


PRE S POST- 
C*1 A Cat 

™ t tr 

COMPRESSOR LLUTC-h 
CKJEPUT S’ALit 


■ 

+ * 



J 


El FCTRiC FA*i 


PURGE VALVE CONTROL 


ictjCT’ ^ 


-VI 


Service 

Engine 

Soon 

■Ca^ 



niHOriLL 
PiVFUTIOj |DSC 
itm 



MOTCfl DRIVEN 1WK&TTIF VALVE 

UW*.CONTROLLED 
IfEATtD THERMOSTAT 

DMTL 


EDK 





□DC 


ART-IP046X.EPS 


9 

M54engMS43/ST036/6/20000 














































































































MS 43 NEW FUNCTIONS 


ELECTRONIC THROTTLE SYSTEM - EML 

The M54 engine with MS 43 engine control uses an electronic throttle control system 
adopted from the ME 7.2 system on the M62 engine. The system incorporates an electric 
throttle valve (EDK) and pedal position sensor (PWG) for engine power control. 

The MS 43 control module monitors the PWG input and activates the EDK motor based on 
the programmed maps for throttle control. The MS 43 module self checks the activation of 
the EDK via feedback potentiometers motor on the EDK motor. 




CRUISE CONTROL REQUESTS 


BRAKE & CLUTCH STATUS 


O 

cc 


o 

o 

cc 

o 


o 

E 


CO 

O 


I 





ART-SCAN DIAGRAM 


Additional functions of the EML system include: 


• Cruise control function 

• DSC throttle interventions 

• Maximum engine and road speed control 


10 

M54engMS43/ST036/6/2000 




MS 43 NEW FUNCTIONS 

ACCELERATOR PEDAL SENSOR 

The accelerator pedal sensor is similar to the PWG used on the ME 7.2 system. It is inte¬ 
grated into the accelerator pedal housing. Two hall sensors are used to provide the driver’s 
input request for power. 

The hall sensors receive power (5 volts) and ground from the MS 43 control module and 
produce linear voltage signals as the pedal is pressed from LL to VL. 


PWG SENSOR 1 = 0.5 to 4.5 V 

PWG SENSOR 2 = 0.5 to 2.0 V 

The MS 43 control module uses the 
signal from sensor 1 as the driver’s 
request and the signal from sensor 2 
as plausibility checking. 



61460015 


11 

M54engMS43/ST036/6/20000 



























































MS 43 NEW FUNCTIONS 

ACCELERATOR PEDAL SENSOR 

PWG SIGNAL MONITORING & PWG FAILSAFE OPERATION: 

• As a redundant safety feature the PWG provides two separate signals from two integral 
angle hall sensors (HS #1 and HS #2) representing the driver’s request for throttle acti¬ 
vation. 

• If the monitored PWG signals are not plausible, MS 43.0 will only use the lower of the 
two signals as the driver’s pedal request input providing failsafe operation. Throttle 
response will be slower and maximum throttle position will be reduced. 

• When in PWG failsafe operation, MS 43.0 sets the EDK throttle plate and injection time 
to idle (LL) whenever the brake pedal is depressed. 

• When the system is in PWG failsafe operation, the instrument cluster matrix display will 
post “Engine Emergency Program” and PWG specific fault(s) will be stored in memory. 



12 

M54engMS43/ST036/6/2000 





















MS 43 NEW FUNCTIONS 


EDK THROTTLE POSITION FEEDBACK SIGNALS 

The EDK throttle plate is monitored by two integrated potentiometers. The potentiometers 
provide linear voltage feedback signals to the control module as the throttle plate is opened 
and closed. 

Feedback signal 1 provides a signal from 0.5 V (LL) to 4.5 V (VL). 

Feedback signal 2 provides a signal from 4.5 V (LL) to 0.5 V (VL) 

Potentiometer signal 1 is the primary feedback signal of throttle plate position and signal 2 
is the plausibility cross check through the complete throttle plate movement. 


MOTOR 

CONTROL 



M54engMS43/ST036/6/20000 


























































MS 43 NEW FUNCTIONS 

EDK THROTTLE POSITION FEEDBACK SIGNALS 

EDK FEEDBACK SIGNAL MONITORING & EDK FAILSAFE OPERATION: 

• The EDK provides two separate signals from two integral potentiometers (Pot 1 and Pot 
2) representing the exact position of the throttle plate. 

• EDK Pot 1 provides the primary throttle plate position feedback. As a redundant safe¬ 
ty feature, Pot 2 is continuously cross checked with Pot 1 for signal plausibility. 

• If plausibility errors are detected between Pot 1 and Pot 2, MS 43.0 will calculate the 
inducted engine air mass (from HFM signal) and only utilize the potentiometer signal that 
closely matches the detected intake air mass. 

- The MS 43.0 uses the air mass signalling as a “virtual potentiometer” (pot 3) for a 
comparative source to provide failsafe operation. 

- If MS 43.0 cannot calculate a plausible conclusion from the monitored pots (1 or 2 
and virtual 3) the EDK motor is switched off and fuel injection cut out is activated 
(no failsafe operation possible). 

• The EDK is continuously monitored during all phases of engine operation. It is also 
briefly activated when KL 15 is initially switched on as a “pre-flight check” to verify it’s 
mechanical integrity (no binding, appropriate return spring tension, etc). This is accom¬ 
plished by monitoring both the motor control amperage and the reaction speed of the 
EDK feedback potentiometers. If faults are detected the EDK motor is switched off and 
fuel injection cut off is activated (no failsafe operation possible). The engine does how¬ 
ever continue to run extremely rough at idle speed. 

• When a replacement EDK is installed, the MS 43.0 adapts to the new component 
(required amperage draw for motor control, feedback pot tolerance differences, etc). 
This occurs immediately after the next cycle of KL 15 for approximately 30 seconds. 
During this period of adaptation, the maximum opening of the throttle plate is 25%. 


14 

M54engMS43/ST036/6/2000 




MS 43 NEW FUNCTIONS 

MAIN RELAY MONITOR 

The MS 43.0 system incorporates a new monitoring feature for terminal 87 (KL 87) of the 
main relay. The relay is monitored internally for the voltage level at KL 87. Five seconds after 
the ignition key is switched on, and the voltage at the KL 15 input is greater than 9 volts, 
the control module checks the voltage at KL 87. 

If the voltage difference between the two terminals is greater than 3 volts, a fault will be 
stored in the ECM. 



15 

M54engMS43/ST036/6/20000 

































































MS 43 NEW FUNCTIONS 


EMISSION OPTIMIZED - IGNITION KEY OFF 

“Emission Optimized Ignition Key Off” is a programmed feature of the MS 43 control mod¬ 
ule. 

After the ECM detects KL 15 being switched OFF, the ignition stays active for two more 
individual coil firings. This means that just two cylinders are fired - not two revolutions. 

This feature allows residual fuel injected into the cylinders, as the ignition key is switched 
off, to be burned as the engine runs down. 

EMISSION OPTIMIZED IGNITION KEYOFF 


M52 LEV 


RPM 



INJECTION 

*-Already injected fuel 


before “key off” 


IGNITION 




A 

k A 

Start key off 



M54 

RPM 

INJECTION 

IGNITION 



▲ 

Start 


key off 



▲ 

ignition off 

IART-E46ICEMIOPT 


16 

M54engMS43/ST036/6/2000 







MS 43 NEW FUNCTIONS 


DM-TL (DIAGNOSIS MODULE - TANK LEAKAGE) 


The M54 engine with the Siemens MS43.0 engine control system uses the DMTL system 
for fuel system leakage monitoring. The pump is manufactured by Bosch for use with the 
Siemen’s control system. 



INLET 


OUTLET TO 
CHARCOAL 
CANISTER 




U 


MOTOR/ 
PUMP 
(INTERNAL) 


CHANGE OVER 
VALVE 
(INTERNAL) 

17 


DETAILED 
VIEW 


CHANGE OVER 
VALVE AIR INLET 


PUMP 
AIR INLET 


3 PIN CONNECTOR 
Pin 1 = Power supply 
Pin 2 = Vent Valve Control 
Pin 3 = Pump Motor Control 


M54engms43/ST036/6/2000 





DM-TL (DIAGNOSIS MODULE - TANK LEAKAGE) 

FUNCTIONAL OVERVIEW: 


The DM-TL is located in the drivers side rear wheel well in the X5 and next to the charcoal 

canister on the E46 - M54. 

1. In it’s inactive state, filtered fresh air enters the evaporative system through the sprung 
open valve of the DM-TL. 

2. When the DME activates the DM-TL for leak testing, it first activates only the pump 
motor. This pumps air through a restrictor orifice (1.0 or 0.5 mm) which causes the elec¬ 
tric motor to draw a specific amperage value. This value is equivalent to the size of the 
restrictor. 

3. The solenoid valve is then energized which seals the evap system and directs the pump 
output to pressurize the evap system. 


The evap system is detected as having a large leak if the amperage value is not realized, a 
small leak if the same reference amperage is realized or no leak if the amperage value is 
higher than the reference amperage. 



14 



P r \—L 

JL 


fresh 

— it— 

_l 

o o o c o 


Tip 

AIR INLET 

r 

DM-TL 

II 

p 

§ I 

J 




(Diagnostic Module - 
Tank Leak detection) 


w w V 



ECM 

MAIN 

RELAY 


1 


© 


il 


A 



A 


IDE 



(Diagnostic Module - 
Tank Leak detection) 


w w 



ECM 

MAIN 

RELAY 



l 


n 


© 


CURRENT 

MONITOR 


V 



©V- 




il 



A_ £ 

IIDE 






© 


CURRENT 

MONITOR 


<s> 


REFERENCE 



© 


- 4 °) 


(Diagnostic Module - 
Tank Leak detection) 


v£ w V 



ECM 

MAIN 

RELAY 


®n| 


1 


A 



A 


IDE 






© 




CUR 

MOh 

RENT 

ITOR 


REFERENCE 






© 


'© 


18 

M54engms43/ST036/6/00 





































































































































































































































































































































DM-TL (DIAGNOSIS MODULE - TANK LEAKAGE) 


FUNCTION 

The DC Motor LDP ensures accurate fuel system leak detection for leaks as small as 
0.5mm (.020”). The pump contains an integral DC motor which is activated directly by the 
engine control module. The ECM monitors the pump motor operating current as the mea¬ 
surement for detecting leaks. 

The pump also contains an ECM controlled change over valve that is energized closed dur¬ 
ing a Leak Diagnosis test. The change over valve is open during all other periods of oper¬ 
ation allowing the fuel system to “breath” through the inlet filter (similar to the full down 
stroke of the current vacuum operated LDP). 



19 

M 54eng MS43/ST039/3/17/00 
























































































































































LEAK DIAGNOSIS TEST PRECONDITIONS 

The ECM only initiates a leak diagnosis test every second time the criteria are met. The cri¬ 
teria is as follows: 

• Engine OFF with ignition switched OFF. 

• Engine Control Module still in active state or what is known as “follow up mode” (Main 
Relay energized, control module and DME components online for extended period after 
key off). 

• Prior to Engine/Ignition switch OFF condition, vehicle must have been driven for a min¬ 
imum of 20 minutes. 

• Prior to minimum 20 minute drive, the vehicle must have been OFF for a minimum of 5 
hours. 

• Fuel Tank Capacity must be between 15 and 85% (safe approximation between 1/4 - 
3/4 of a tank). 

• Ambient Air Temperature between -7°C & 35°C (20°F & 95°F) 

• Altitude < 2500m (8,202 feet). 

• Battery Voltage between 11.5 and 14.5 Volts 

When these criteria are satisfied every second time, the ECM will start the Fuel System Leak 
Diagnosis Test. The test will typically be carried out once a day i.e. once after driving to 
work in the morning, when driving home in the evening, the criteria are once again met but 
the test is not initiated. The following morning, the test will run again. 


20 

M54engMS43/ST039/3/17/00 



LEAK DIAGNOSIS TEST 

PHASE 1- REFERENCE MEASUREMENT 

The ECM activates the pump motor. The pump pulls air from the filtered air inlet and pass¬ 
es it through a precise 0.5mm reference orifice in the pump assembly. 

The ECM simultaneously monitors the pump motor current flow . The motor current raises 
quickly and levels off (stabilizes) due to the orifice restriction. The ECM stores the stabilized 
amperage value in memory. The stored amperage value is the electrical equivalent of a 0.5 
mm (0.020”) leak. 



21 

M54engMS43/ST039/3/17/00 




























































































































































PHASE 2 - LEAK DETECTION 


The ECM energizes the Change Over Valve allowing the pressurized air to enter the fuel sys¬ 
tem through the Charcoal Canister, The ECM monitors the current flow and compares it 
with the stored reference measurement over a duration of time. 



Once the test is concluded, the ECM stops the pump motor and immediately de-energizes 
the change over valve. This allows the stored pressure to vent thorough the charcoal can¬ 
ister trapping hydrocarbon vapor and venting air to atmosphere through the filter. 


22 

M54engMS43/ST039/3/17/00 

























































































































































TEST RESULTS 

The time duration varies between 45 & 270 seconds depending on the resulting leak diag¬ 
nosis test results (developed tank pressure “amperage” / within a specific time period). 
However the chart below depicts the logic used to determine fuel system leaks. 


Current 



23 

M54engMS43/ST039/3/17/00 





















MS 43 CARRY OVER FUNCTIONS 

INPUT FUNCTIONS 
BOSCH OXYGEN SENSORS 


The MS43.0 system uses Bosch LSH 25 oxygen sensors that function basically the same 
as previously used (in Bosch systems). The voltage range is between 0 - 800 mV. 



PRE 02 SENSOR POST 02 SEN¬ 

SOR 


The location remains the same with the pre-cat sensors are mounted on top of the exhaust 
manifolds. The catalysts are now integral with the exhaust manifolds (further detailed in the 
M52 TU engine section). 



24 

M54engMS43/ST036/6/2000 









OXYGEN SENSOR SIGNAL INFLUENCE ON INJ ECTOR "OPEN"TIME 

The ECM monitors the: 

• Amplitude of the signal (highest voltage or range sensor is producing) 

• Switching time of the signal (how fast from lean to rich) 

• Frequency of complete cycles (how many within a period of time) 

These characteristics provide info to the ECM that reflect the overall condition of the sen¬ 
sor. 

POST CATALYTIC CONVERTER SENSOR SIGNAL 

The post catalyst 02 sensors monitor the efficiency of the catalyst as a requirement of OBD 
II. This signal also provides feedback of the pre-catalyst sensors efficiency and can cause 
the ECM to “trim” the ms injection time to correct for slight deviations. 


• If the catalyst is operating efficiently, most of the remaining oxygen in the exhaust gas 
is burned (lack of 02 - “constant lean signal”). 

The sensor signal fluctuates slightly in the higher end of the voltage scale. 


• If the post sensor shows excessive fluctuations (which echo the scope pattern of the pre 
sensor), this indicates that the catalytic converter is not functioning correctly and cannot 
consume the 02 (fault set). 


• If the post sensor fluctuations move out of the normal voltage “window”, this indicates 
that the pre sensor is not performing properly due to slight deterioration. These systems 
can also “trim” the ms injection time to compensate for this. 

The constantly changing oxygen sensor input to the ECM is needed to correct the ms 
injection time to ensure that the ideal air/fuel ratio is maintained. 


25 

M54engMS43/ST036/6/20000 



CAMSHAFT SENSOR 

-INTAKE AND EXHAUST CAMSHAFTS 

The "static" Hall sensors are used so that the camshaft positions are recognized once igni¬ 
tion is “on” - even before the engine is started. 

The function of the intake cam sensor: 

• Cylinder bank detection for preliminary injection 

• Synchronization 

• Engine speed sensor (if crankshaft speed sensor fails) 

• Position control of the intake cam (VANOS) 

The exhaust cam sensor is used for position control of the exhaust cam (VANOS) 

If these sensors fail there are no substitute values, the system will operate in the failsafe 
mode with no VANOS adjustment. The engine will still operate, but torque reduction will be 
noticeable. 

NOTE: Use caution on repairs as not to bend the impulse wheels 


tAI-IAUS I 


TWO POSITION PISTON 
HOUSING WITH 
INTERNAL/EXTERNAL 
HELICAL GEAR CUP 


MS 43.0 

tim 


KL 15 



MS 43.0 

ECM 


SOLENOID 


TWO POSITION PISTON HOUSING 
WITH INTERNAL/EXTERNAL 
HELICAL GEAR CUP 


ENGINE 
OIL SUPPLY 


n^: 


INTAKE 




OIL TEMP. 
SENSOR 


26 

M54engMS43/ST036/6/2000 



CRANKSHAFT SENSOR 


The crankshaft sensor is a dynamic Hall-effect sensor (mounted through the engine block), 
the signal is sent the moment the crankshaft begins to rotate. 

The pulse wheel is mounted directly to the crankshaft as seen on previous models. 



CRANKSHAFT 
POSITION 
SENSOR 
(HALL EFFECT) 







Print 


Change 


End 


Services 












BMW Test system Oscilloscope display 



Help 


Hold Screen 


Function 


Document 


s 

Test 

Selection 




Module 


< t> 


Test 

System 


Print 


Change 


End 


Services 


BMW Test system Oscilloscope display 



<^1 


Function 


Document 


_ 

Test 



Selection 




Module 


\< t> 


Test 

System 


Help 



SMOOTH RUNNING ENGINE ENGINE MISFIRE DETECTED 
NOTE SQUARE WAVE 


27 

M54engMS43/ST036/6/20000 





















































































































































































































































































































































































































































MISFIRE DETECTION 


As part of the CARB/OBD regulations the engine control module must determine if misfire 
is occurring and also identify the specific cylinder(s) and the severity of the misfire event, 
and whether it is emissions relevant or catalyst damaging. In order to accomplish these 
tasks the control module monitors the crankshaft for acceleration losses during firing seg¬ 
ments of each cylinder based on firing order. 

Misfire Detection Example: M54 (6 Cyl.) with Siemens System 

The misfire/engine roughness calculation is derived from the differences in the period dura¬ 
tion (T) of individual increment gear segments. Each segment period consist of an angular 
range of 120° crank angle that starts 78° before Top Dead Center (TDC). 

If the expected period duration is greater than the permissible value a misfire fault for the 
particular cylinder is stored in the fault memory of the ECM. Depending on the level of mis¬ 
fire rate measured the control unit will illuminate the "Service Engine Soon" light, may cut¬ 
off fuel to the particular cylinder and may switch lambda operation to open-loop. All mis¬ 
fire faults are weighted to determine if the misfire is emissions relevant or catalyst damag¬ 
ing. 


28 

M54engMS43/ST036/6/2000 



EMISSIONS RELEVANT: 

During an interval of 1000 crankshaft revolutions the misfire events of all cylinders are 
added and if the sum is greater than a predetermined value a fault will be set identifying the 
particular cylinder(s). The “Service Engine Soon” light will be illuminated during and after 
the second cycle if the fault is again present. 

CATALYST DAMAGING: 

During an interval of 200 crankshaft revolutions the misfire events of all cylinders are added 
and if the sum is greater than a predetermined value a fault will be set identifying the par¬ 
ticular cylinders(s). The “Service Engine Soon” lamp: 

• On vehicles with a Siemens Control Module (M54 engines) - the lamp will immediately go 
to a steady illumination since fuel to the injector(s) is removed. Fuel cut-off to the cylin¬ 
der will resume after several (» 7) periods of decel if crankshaft sensor adaptation is suc¬ 
cessfully completed or the engine is shut-off and restarted. 


In each case the number of misfire events permitted is dependent on engine speed, load 
and temperature map. 

The process of misfire detection continues well after the diagnostic drive cycle requirements 
have been completed. Misfire detection is an on-going monitoring process that is only dis¬ 
continued under certain conditions. 


Misfire detection is only disabled under the following conditions: 


REQUIREMENTS 

STATUS/CONDITION 

Engine Speed 

<512 RPM 

Engine Load 

Varying/Unstable 

Throttle Angle 

Varying/Unstable 

Timing 

Timing retard request active (i.e. knock 
control - ASC, AGS) 

Engine Start-up 

Up to 5 seconds after start-up 

A/C 

Up to 0.5 seconds after A/C activation 

Decel fuel cut-off 

Active 

Rough road recognition 

Active 

ASC Control 

Active 


29 

M54engMS43/ST036/6/20000 











OBD II - Misfire Faults 




~o 

CD 

CD 


3 = 

cd 

a3 

TD 



c 

CD 

-Q 

D) 

c 

co 

_CD 

CO 

CD 

> 

co 

> 


30 

M54engMS43/ST036/6/2000 






MASS AIR FLOW SENSOR HFM 


The Siemens mass air flow sensor is functionally the same as in the past. The designation 
2 Type B simply indicates that it is smaller in design. The mass air meter has a diameter of 
85 mm. 




31 

M54engMS43/ST036/6/20000 






MS 43 CARRY OVER FUNCTIONS 

OUTPUT FUNCTIONS -VANOS CONTROL 

With the double VANOS system, the valve timing is changed on both the intake and the 
exhaust camshafts. 

Double VANOS provides the following benefits: 

• Torque increase in the low to mid (1500 - 2000 RPM) range without power loss in the 
upper RPM range. 

• Less incomplete combustion when idling due to less camshaft overlap (also improves 
idle speed characteristics). 

• Internal exhaust gas recirculation (EGR) in the part load range (reduces NOx and post¬ 
combustion of residual gasses in the exhaust) 

• Rapid catalyst warm up and lower “raw” emissions after cold start. 

• Reduction in fuel consumption 

Double VANOS consists of the following parts: 

• Intake and exhaust camshafts with helical gear insert 

• Sprockets with adjustable gears 

• VANOS actuators for each camshaft 

• 2 three-way solenoid switching valves 

• 2 impulse wheels for detecting camshaft position 

• 2 camshaft position sensors (Hall effect) 

The “initial” timing is set by gear positioning (refer to the Repair Instructions for details) and 
the chain tensioner. As with the previous VANOS, the hydraulically controlled actuators 
move the helical geared cups to regulate camshaft timing. The angled teeth of the helical 
gears cause the pushing movement of the helical cup to be converted into a rotational 
movement. This rotational movement is added to the turning of the camshafts and cause 
the camshafts to “advance” or “retard”. The adjustment rate is dependent oil temperature, 
oil pressure, and engine RPM. 


32 

M54engMS43/ST036/6/2000 




NOTE: With extremely hot oil temperatures Vanos is deactivated (Power loss). If the oil is 
too thick (wrong viscosity) a fault could be set. 

When the engine is started, the camshafts are in the “failsafe” position (deactivated). The 
intake camshaft is in the RETARDED position - held by oil pressure from the sprung open 
solenoid. The exhaust camshaft is in the ADVANCED position - held by a preload spring in 
the actuator and oil pressure from the sprung open solenoid. 

After 50 RPM (2-5 seconds) from engine start, the ECM is monitoring the exact camshaft 
position. 

The ECM positions the camshafts based on engine RPM and the throttle position signal. 
From that point the camshaft timing will be varied based on intake air and coolant temper¬ 
atures. 

The double VANOS system is “fully variable”. When the ECM detects the camshafts are in 
the optimum positions, the solenoids are modulated (approximately 100-220 Hz) maintain¬ 
ing oil pressure on both sides of the actuators to hold the camshaft timing. 

CAUTION: The VANOS MUST be removed and installed exactly as described in the Repair 

Instructions! 

NOTE: If the VANOS camshaft system goes to the failsafe mode (deactivated) there will be 
a noticeable loss of power. This will be like driving with retarded ignition or starting from a 
stop in third gear. 



DEACTIVATED 


EXHAUST 


TWO POSITION PISTON 
HOUSING WITH 
INTERNAL/EXTERNAL 
HELICAL GEAR CUP 


KL 15 


MS 43.0 

ECM 



MS 43.0 

ECM 


SOLENOID 


TWO POSITION PISTON HOUSING 
WITH INTERNAL/EXTERNAL 
HELICAL GEAR CUP 


ENGINE 
OIL SUPPLY 




INTAKE 



MS 43.0 


OIL TEMP. 
SENSOR 


EXHAUST: Advanced 
piston moved in 

INTAKE: Retard piston 
moved out 


ACTIVATED 


EXHAUST 


MS 43.0 


TWO POSITION PISTON 
HOUSING WITH 
INTERNAL/EXTERNAL 
HELICAL GEAR CUP 


KL 15 


MS 43.0 

ECM 



TWO POSITION PISTON HOUSING 
WITH INTERNAL/EXTERNAL 
HELICAL GEAR CUP 


INTAKE 


OIL TEMP. 
SENSOR 


MS 43.0 


EXHAUST: Advanced 
piston moved out 

INTAKE: Retard piston 
moved in 




34 

M54 engMS43/ST036/6/2000 





















































The dual VANOS in conjunction with the variable intake manifold provides an additional 
emission control feature. 


Because of the improved combustion, the camshaft timing is adjusted for more overlap. 
The increased overlap supports internal exhaust gas recirculation (EGR) which reduces 
tailpipe emissions and lowers fuel consumption. 


During the part load engine range, the intake camshaft overlap opens the intake valve. This 
allows limited exhaust gas reflow the intake manifold. 


The “internal” EGR reduces the cylinder temperature thus lowering NOx. This feature pro¬ 
vides EGR without the external hardware as seen on previous systems. 


OUTLET-VANOS 


LET-VANOS 


SECONDARY 

AIR 

ECTION 
(AIR FILTER) 



IDLE AIR 

CONTROL VALVE 


35 

M54engMS43/ST036/6/20000 






























































































ELECTRIC FAN 


The electric cooling fan is now controlled by the ECM. The ECM uses a remote power out¬ 
put final stage (mounted on the fan housing) 

The power output stage receives power from a 50 amp fuse (located in glove box above 
the fuse bracket). The electric fan is controlled by a pulse width modulated signal from the 
ECM. 

The fan is activated based on the ECM calcula¬ 
tion (sensing ratio) of: 


• Coolant outlet temperature 

• Calculated (by the ECM) catalyst temperature 

• Vehicle speed 

• Battery voltage 

• Air Conditioning pressure (calculated by IHKA 
and sent via the K-Bus to the ECM) 


POWER 



NOTE: If the ECM indicates a fault check the fan for freedom of movement 

After the initial test has been performed, the fan is brought up to the specified operating 
speed. At 10% (sensing ratio) the fan runs at 1/3 speed. At a sensing ratio of between 90- 
95% the fan is running at maximum speed. Below 10% or above 95% the fan is stationary. 

The sensing ratio is suppressed by a hysteresis function, this prevents speed fluctuation. 
When the A/C is switched on, the electric fan is not immediately activated. 

After the engine is switched off, the fan may continue to operate at varying speeds (based 
on the ECM calculated catalyst temperature). This will cool the radiator down from a heat 
surge (up to 10 minutes). 


36 

M54engMS43/ST036/6/2000 




SECONDARY AIR INJ ECTION 

This ECM controlled function remains unchanged from 
the previous Siemens MS system, however there is a 
hardware change. 

The Air Injection Inlet Valve mounts directly to the cylin¬ 
der head, with a passageway machined through the 
head. This eliminates the external Air Injection manifold 
distribution pipes to the exhaust manifolds. 



SECONDARY AIR INJ ECTION MONITORING 

In order to reduce HC and CO emissions while the engine is warming up, BMW imple¬ 
mented the use of a Secondary Air Injection System in. Immediately following a cold engine 
start (-10 - 40°C) fresh air/oxygen is injected directly into the exhaust manifold. By inject¬ 
ing oxygen into the exhaust manifold: 

• The warm up time of the catalyst is reduced 

• Oxidation of the hydrocarbons is accelerated 

The activation period of the air pump can vary depending on engine type and operating 
conditions. 

Conditions for Secondary Air Pump Activation: 


REQUIREMENTS 

STATUS/CONDITION 

STATUS/CONDITION 


IMS 43.0 . 

M73 

Oxygen sensor 

Open Loop 

Open Loop 

Oxygen sensor heating 

Active 

Active 

Engine coolant temperature 

-10 to 40°C* 

-10 to 40°C* Stage 

Engine bad 

Predefined Range 

Predefined Range 

Engine speed 

Predefined Range 

Predefined Range 

Fault Codes 

No Secondary Air Faults 

No Secondary Air Faults 


“currently present” 

“currently present” 


*NOTE: Below -10°C the air injection pump is activated only as a preventive measure to 
blow out any accumulated water vapor that could freeze in the system. 


37 

M54engMS43/ST036/6/20000 














The Secondary Air Injection System is monitored via the use of the pre-catalyst oxygen sen¬ 
sors). Once the air pump is active and is air injected into the system the signal at the oxy¬ 
gen sensor will reflect a lean condition. If the oxygen sensor signal does not change with¬ 
in a predefined time a fault will be set and identify the faulty bank(s). If after completing the 
next cold start and a fault is again present the "Service Engine Soon" light will be illuminat¬ 
ed. 

Example: Secondary Air Injection Monitoring (M54-Siemens System) 

During a cold start condition air is immediately injected into the exhaust manifold and since 
the oxygen sensors are in open loop at this time the voltage at the pre catalyst sensor will 
reflect a lean condition) and will remain at this level while the air pump is in operation. Once 
the pump is deactivated the voltage will change to a rich condition until the system goes 
into closed loop operation. 

M54 System Operation: 

The pump draws air through its own air filter and delivers it to both exhaust manifolds 
through a non-return (shutoff valve). The non-return valve is used to: 

1. Control air injection into the exhaust manifold - A vacuum controlled valve will open the 
passageway for air to be injected once a vacuum is applied. 

2. Prevent possible backfires from traveling up the pipes and damaging the air pump when 
no vacuum is applied. 

The control module activates the vacuum vent valve whenever the air pump is energized. 
Once the vacuum vent valve is energized a vacuum is applied to the non-return valve which 
allows air to be injected into the exhaust manifold. A vacuum is retained in the lines, by the 
use of a check valve, in order to allow the non-return valve to be immediately activated on 
cold engine start up. When the vacuum/vent valve is not energized, the vacuum to the 
non-return valve is removed and is vented to atmosphere. 



38 

M54engMS43/ST036/6/2000 


DURATION OF TIWE AFTER ENGINE STARTS fr seconds) 



ENGINE/VEHICLE SPEED 
LIMITATION 


For engine/vehicle speed limitation, the ECM will deactivate injection for individual cylinders, 
allowing a smoother limitation transition. This prevents over-rev when the engine reaches 
maximum RPM (under acceleration), and limits top vehicle speed (approx. 128 mph). 



39 

M54engMS43/ST036/6/20000 

































































RZV IGNITION SYSTEM 


The Siemens MS43.0 system uses a multiple spark ignition function. The purpose of mul¬ 
tiple ignition is: 


• Provide clean burning during engine start up and while idling (reducing emissions). 


• This function helps to keep the spark plugs clean for longer service life (new BMW 
longlife plugs). 


MS 43.0 

CONTROL 

MODULE 



KL 15 


TO ALL 
OTHER 
IGNITION 
COILS 


Multiple ignition is active up to an engine speed of approximately 1350 RPM (varied with 
engine temperature) and up to 20 degrees after TDC. 


Multiple ignition is dependent on battery voltage. When the voltage is low, the primary cur¬ 
rent is also lower and a longer period of time is required to build up the magnetic field in the 
coil(s). 


• Low battery voltage = less multiple ignitions 

• High battery voltage = more multiple ignitions 


The 240 ohm shunt resistor is still used on the MS43.0 system for detecting secondary igni¬ 
tion faults and diagnostic purposes. 


40 

M54engMS43/ST036/6/2000 





































RESONANCE/TURBULENCE INTAKE SYSTEM 


On the M54, the intake manifold is split into 2 groups of 3 (runners) which increases low 
end torque. The intake manifold also has separate (internal) turbulence bores which chan¬ 
nels air from the idle speed actuator directly to one intake valve of each cylinder (matching 
bore of 5.5mm in the cylinder head). 

Routing the intake air to only one intake valve causes the intake to swirl in the cylinder. 
Together with the high flow rate of the intake air due to the small intake cross sections, this 
results in a reduction in fluctuations and more stable combustion. 


MAIN MAINIFOLD 



CRANKCASE VENTILATION 


TURBULENCE BORE 0:5.5mm 


41 

M54engMS43/ST036/6/20000 















































































































RESONANCE SYSTEM 


The resonance system provides increased engine torque at low RPM, as well as addition¬ 
al power at high RPM. Both of these features are obtained by using a resonance flap (in 
the intake manifold) controlled by the ECM. 

During the low to mid range rpm, the resonance flap is closed. This produces a long/sin¬ 
gle intake tube for velocity, which increases engine torque. 

During mid range to high rpm, the resonance flap is open. This allows the intake air to pull 
through both resonance tubes, providing the air volume necessary for additional power at 
the upper RPM range. 

When the flap is closed , this creates another “dynamic” effect. For example, as the intake 
air is flowing into cylinder #1, the intake valves will close. This creates a “roadblock” for the 
in rushing air. The air flow will stop and expand back (resonance wave back pulse) with the 
in rushing air to cylinder #5. The resonance “wave”, along with the intake velocity, 
enhances cylinder filling. 

The ECM controls a solenoid valve for resonance flap activation. At speeds below 3750 
RPM, the solenoid valve is energized and vacuum supplied from an accumulator closes 
the resonance flap. This channels the intake air through one resonance tube, but increas¬ 
es the intake velocity. 

When the engine speed is greater than 4100 RPM (which varies slightly - temperature influ¬ 
enced), the solenoid is de-energized. The resonance flap is sprung open, allowing flow 
through both resonance tubes, increasing volume. 



42 

M54engMS43/ST036/6/2000 




#1 Cylinder Intake Valve open 


RAM TUBE 




MAIN MANIFOLD 


RESONANCE TUBE 


k 


Low to Mid Range RPM 
(<3750 RPM) 



MAGNETIC 

-t|r 




IDLE CONTROL VALVE 
(ZWD) 


RESONANCE MANIFOLD 



MAIN MANIFOLD 


RESONANCE TUBE 



#1 Cylinder Intake Valve closes 
#5 Intake Valve Opens 
=> Intake Air Bounce Effect 

Low to Mid Range RPM 
(<3750 RPM) 


/ 


IrQFD^fl 

_ 


CONTROL VALVE 
(ZWD) 


RESONANCE MANIFOLD 



43 

M54engMS43/ST036/6/20000 

















































































RAM Tl IRP 



MAIN MANIFOLD 


RESONANCE TUBE 


#1 Cylinder Intake Valve open 
Intake air drawn from both 
resonance tubes. 

Mid to High Range RPM 
(>3750 RPM) 


IDLE CONTROL VALVE 
(ZWD) 


RESONANCE MANIFOLD 



MAIN MANIFOLD 


RESONANCE TUBE 


#5 Cylinder Intake Valve open 
Intake air drawn from both 
resonance tubes. 

Mid to High Range RPM 
(>3750 RPM) 



44 

M54engMS43/ST036/6/2000 













































































































IDLE SPEED CONTROL 


The ECM determines idle speed by controlling an idle speed actuator (dual winding rotary 
actuator) ZWD 5. 


The basic functions of the idle speed control are: 


• Control the initial air quantity 
(at air temperatures <0 C, 
the EDK is simultaneously 
opened) 

• Variable preset idle based on 
load and inputs 

• Monitor RPM feedback for 
each preset position 

• Lower RPM range intake air 
flow (even while driving) 

• Vacuum limitation 


MAIN MAINIFOLD 



TURBULENCE BORE 0:5.5mm 


• Smooth out the transition from acceleration to deceleration 


Under certain engine operating parameters, the EDK throttle control and the idle speed 
actuator (ZWD) are operated simultaneously.This includes All idling conditions and the tran¬ 
sition from off idle to load. 


As the request for load increases, the idle valve will remain open and the EDK will supply 
any additional air volume required to meet the demand. 

Emergency Operation of Idle Speed Actuator: 

If a fault is detected with the idle speed actuator, the ECM will initiate failsafe measures 
depending on the effect of the fault (increased air flow or decreased air flow). 

If there is a fault in the idle speed actuator/circuit, the EDK will compensate to maintain idle 
speed. The EML lamp will be illuminated to inform the driver of a fault. 

If the fault causes increased air flow (actuator failed open), VANOS and Knock Control are 
deactivated which noticeably reduces engine performance. 


45 

M54engMS43/ST036/6/20000 





















































































CRUISE CONTROL 


Cruise control is integrated into the ECM because of the EDK operation. 

Cruise control functions are activated directly by the multifunction steering wheel to the 
ECM. The individual buttons are digitally encoded in the MFL switch and is input to the ECM 
over a serial data wire. 



INSTRUMENT CLUSTER 


The ECM controls vehicle speed by activation of the Electronic Throttle Valve (EDK) 

The clutch switch disengages cruise control to prevent over-rev during gear changes. 

The brake light switch and the brake light test switch are input to the ECM to disengage 
cruise control as well as fault recognition during engine operation of the EDK. 

Road speed is input to the ECM for cruise control as well as DSC regulation. The vehicle 
speed signal for normal engine operation is supplied from the DSC module (right rear wheel 
speed sensor). The road speed signal for cruise control is supplied from the DSC module. 
This is an average taken from both front wheel speed sensors, supplied via the CAN bus. 


46 

M54engMS43/ST036/6/2000 


















































PURGE VALVE 


The purge valve (TEV) is activated at 10 Hz by the ECM to cycle open, and is sprung 
closed. The valve is identical to the purge valve used on the Siemens MS 42 system. 


OPERATING POWER 
FROM ECM MAIN RELAY 



VAPORS FROM 
CHARCOAL 
CANISTER H 




J 

_ / 



VAPORS TO VACUUM PORT 
ON THROTTLE HOUSING 


r\ 



47 

M54engMS43/ST036/6/20000 












































































REVIEW QUESTIONS 


1. List the major changes to the Siemens MS 43.3 system from MS 42: 



2. What type of signal does the Hall Sensor - PWG provide to ECM for throttle request? 


3. What PWG signal is used if PWG has a plausibility error? 


4. What is the purpose of the KL 87 main relay monitor in the ECM? 


5. Why is the ignition left ON after KL 15 is switched OFF? 


6. Describe the operation of the DM-TL system on MS 43.0. 



7. Describe the operation of the turbulence - resonance manifold. 



48 

M54engMS43/ST036/6/2000 










